(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{368:function(t,e,a){"use strict";a.r(e);var r=a(42),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),a("h2",{attrs:{id:"设置容器崩溃重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置容器崩溃重启"}},[t._v("#")]),t._v(" 设置容器崩溃重启")]),t._v(" "),a("p",[t._v("如果创建时未指定 --restart=always ,可通过update 命令设置"),a("br"),t._v(" "),a("code",[t._v("docker update --restart=always xxx")])]),t._v(" "),a("h2",{attrs:{id:"复制宿主机文件到容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#复制宿主机文件到容器"}},[t._v("#")]),t._v(" 复制宿主机文件到容器")]),t._v(" "),a("p",[a("code",[t._v("docker cp /data/file.txt 69bf3354fade://home/")])]),t._v(" "),a("blockquote",[a("p",[t._v("/data/file.txt为宿主机文件\n69bf3354fade为容器id\n/home/为容器文件目录")])]),t._v(" "),a("h2",{attrs:{id:"把容器里的文件复制到宿主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#把容器里的文件复制到宿主机"}},[t._v("#")]),t._v(" 把容器里的文件复制到宿主机")]),t._v(" "),a("p",[a("code",[t._v("docker cp 73829d7b6139:/logs/test.txt /home")])]),t._v(" "),a("blockquote",[a("p",[t._v("把容器73829d7b6139里面logs目录下的test.txt 拷贝到宿主机的/home目录下")])]),t._v(" "),a("h2",{attrs:{id:"保存镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#保存镜像"}},[t._v("#")]),t._v(" 保存镜像")]),t._v(" "),a("p",[a("code",[t._v("docker save visi-admin >beifen.tar")])]),t._v(" "),a("blockquote",[a("p",[t._v("visi-admin为镜像名字"),a("br"),t._v("\nbeifen.tar为保存后生成的镜像名")])]),t._v(" "),a("h2",{attrs:{id:"导入镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入镜像"}},[t._v("#")]),t._v(" 导入镜像")]),t._v(" "),a("p",[a("code",[t._v("docker load <beifen.tar")])]),t._v(" "),a("h2",{attrs:{id:"查看最近100条日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看最近100条日志"}},[t._v("#")]),t._v(" 查看最近100条日志")]),t._v(" "),a("p",[a("code",[t._v("docker logs -f -t --tail=100 284676e7842f")])]),t._v(" "),a("h2",{attrs:{id:"查看正在运行的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看正在运行的容器"}},[t._v("#")]),t._v(" 查看正在运行的容器")]),t._v(" "),a("p",[a("code",[t._v("sudo docker ps")])]),t._v(" "),a("h2",{attrs:{id:"进入某个容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入某个容器"}},[t._v("#")]),t._v(" 进入某个容器")]),t._v(" "),a("p",[a("code",[t._v("docker exec -it id bash")])]),t._v(" "),a("h2",{attrs:{id:"重命名容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重命名容器"}},[t._v("#")]),t._v(" 重命名容器")]),t._v(" "),a("p",[a("code",[t._v("sudo docker rename oldname newname")])]),t._v(" "),a("h2",{attrs:{id:"提交容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提交容器"}},[t._v("#")]),t._v(" 提交容器")]),t._v(" "),a("p",[a("code",[t._v("docker commit container_id image")])]),t._v(" "),a("h2",{attrs:{id:"启动容器时加入端口映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动容器时加入端口映射"}},[t._v("#")]),t._v(" 启动容器时加入端口映射")]),t._v(" "),a("p",[a("code",[t._v("sudo docker run -itd -p 53306:3306 -p522:22 centosport /bin/bash")])]),t._v(" "),a("blockquote",[a("p",[t._v("-p加端口映射，多个端口映射时写多个-p"),a("br"),t._v(" "),a("code",[t._v("报错Failed to get D-Bus connection: Operation not permitted")])])]),t._v(" "),a("p",[a("code",[t._v("sudo docker run --privileged -itd -p 63306:3306 -p622:22 centosmysql /usr/sbin/init")])]),t._v(" "),a("blockquote",[a("p",[t._v("若不加--privileged和/usr/sbin/init报错内容：Failed to get D-Bus connection: Operation not permitted。报这个错的原因是dbus-daemon没能启动。systemctl并不是不能使用。将CMD或者entrypoint设置为/usr/sbin/init即可。docker容器会自动将dbus等服务启动起来")])]),t._v(" "),a("h2",{attrs:{id:"修改镜像名称"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改镜像名称"}},[t._v("#")]),t._v(" 修改镜像名称")]),t._v(" "),a("p",[a("code",[t._v("docker tag 73829d7b6139 mysql:5.6.44")])]),t._v(" "),a("blockquote",[a("p",[t._v("把镜像id为73829d7b6139的命名为mysql:5.6.44\ndocker tag IMAGEID(镜像id) REPOSITORY:TAG（仓库：标签）")])]),t._v(" "),a("h2",{attrs:{id:"打包镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包镜像"}},[t._v("#")]),t._v(" 打包镜像")]),t._v(" "),a("p",[a("code",[t._v("docker build -t server .")])]),t._v(" "),a("blockquote",[a("p",[t._v("在当前目录编写DockerFile文件，根据 "),a("strong",[t._v("DockerFile")]),t._v(" 内容打包到镜像"),a("br"),t._v("\n.把当前目录下的所有文件\nserver 镜像名字")])]),t._v(" "),a("h2",{attrs:{id:"监控命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监控命令"}},[t._v("#")]),t._v(" 监控命令")]),t._v(" "),a("p",[a("code",[t._v("docker stats")])]),t._v(" "),a("h2",{attrs:{id:"查看进程信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看进程信息"}},[t._v("#")]),t._v(" 查看进程信息")]),t._v(" "),a("p",[a("code",[t._v("docker top")])])])}),[],!1,null,null,null);e.default=s.exports}}]);