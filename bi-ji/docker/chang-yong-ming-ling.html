<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常用命令 | 首页</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/assets/img/photo.jpg">
    <meta name="description" content=" ">
    
    <link rel="preload" href="/assets/css/0.styles.7385e7f5.css" as="style"><link rel="preload" href="/assets/js/app.624cd73c.js" as="script"><link rel="preload" href="/assets/js/2.91d313f1.js" as="script"><link rel="preload" href="/assets/js/11.2406fe55.js" as="script"><link rel="prefetch" href="/assets/js/10.544f3d8e.js"><link rel="prefetch" href="/assets/js/12.e60864e4.js"><link rel="prefetch" href="/assets/js/13.6ce0296e.js"><link rel="prefetch" href="/assets/js/14.1afd1aa6.js"><link rel="prefetch" href="/assets/js/15.72005716.js"><link rel="prefetch" href="/assets/js/16.803bdc41.js"><link rel="prefetch" href="/assets/js/17.fd9c467e.js"><link rel="prefetch" href="/assets/js/18.67404b97.js"><link rel="prefetch" href="/assets/js/19.5692ceb6.js"><link rel="prefetch" href="/assets/js/20.19526d10.js"><link rel="prefetch" href="/assets/js/21.8d4a610a.js"><link rel="prefetch" href="/assets/js/22.70b6609e.js"><link rel="prefetch" href="/assets/js/23.818e0ce3.js"><link rel="prefetch" href="/assets/js/24.828e869b.js"><link rel="prefetch" href="/assets/js/25.63d01e3f.js"><link rel="prefetch" href="/assets/js/26.f6fd203a.js"><link rel="prefetch" href="/assets/js/27.e1556b5e.js"><link rel="prefetch" href="/assets/js/28.0c532b1c.js"><link rel="prefetch" href="/assets/js/29.d5589208.js"><link rel="prefetch" href="/assets/js/3.3889365a.js"><link rel="prefetch" href="/assets/js/30.2dd8dc8a.js"><link rel="prefetch" href="/assets/js/31.9f077fe7.js"><link rel="prefetch" href="/assets/js/32.61668ed1.js"><link rel="prefetch" href="/assets/js/33.df5dd658.js"><link rel="prefetch" href="/assets/js/34.7350d3af.js"><link rel="prefetch" href="/assets/js/35.21db3964.js"><link rel="prefetch" href="/assets/js/36.3ebd5542.js"><link rel="prefetch" href="/assets/js/4.4bf6fbd6.js"><link rel="prefetch" href="/assets/js/5.657a8b44.js"><link rel="prefetch" href="/assets/js/6.bc125e13.js"><link rel="prefetch" href="/assets/js/7.6154d72f.js"><link rel="prefetch" href="/assets/js/8.315dfa5c.js"><link rel="prefetch" href="/assets/js/9.c73e29d1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7385e7f5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">首页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bi-ji/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/dai-ma/" class="nav-link">
  代码
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bi-ji/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/dai-ma/" class="nav-link">
  代码
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bi-ji/docker/chang-yong-ming-ling.html" aria-current="page" class="active sidebar-link">常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#设置容器崩溃重启" class="sidebar-link">设置容器崩溃重启</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#复制宿主机文件到容器" class="sidebar-link">复制宿主机文件到容器</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#把容器里的文件复制到宿主机" class="sidebar-link">把容器里的文件复制到宿主机</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#保存镜像" class="sidebar-link">保存镜像</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#导入镜像" class="sidebar-link">导入镜像</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#查看最近100条日志" class="sidebar-link">查看最近100条日志</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#查看正在运行的容器" class="sidebar-link">查看正在运行的容器</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#进入某个容器" class="sidebar-link">进入某个容器</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#重命名容器" class="sidebar-link">重命名容器</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#提交容器" class="sidebar-link">提交容器</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#启动容器时加入端口映射" class="sidebar-link">启动容器时加入端口映射</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#修改镜像名称" class="sidebar-link">修改镜像名称</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#打包镜像" class="sidebar-link">打包镜像</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#监控命令" class="sidebar-link">监控命令</a></li><li class="sidebar-sub-header"><a href="/bi-ji/docker/chang-yong-ming-ling.html#查看进程信息" class="sidebar-link">查看进程信息</a></li></ul></li><li><a href="/bi-ji/docker/huan-jing-xiang-di-zhi.html" class="sidebar-link">docker更换镜像仓库</a></li><li><a href="/bi-ji/docker/shi-jian-wen-ti.html" class="sidebar-link">容器时间与宿主机不一致</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Jenkins</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nexus</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redisson</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Shell</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ubuntu</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vmware</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h1> <h2 id="设置容器崩溃重启"><a href="#设置容器崩溃重启" class="header-anchor">#</a> 设置容器崩溃重启</h2> <p>如果创建时未指定 --restart=always ,可通过update 命令设置<br> <code>docker update --restart=always xxx</code></p> <h2 id="复制宿主机文件到容器"><a href="#复制宿主机文件到容器" class="header-anchor">#</a> 复制宿主机文件到容器</h2> <p><code>docker cp /data/file.txt 69bf3354fade://home/</code></p> <blockquote><p>/data/file.txt为宿主机文件
69bf3354fade为容器id
/home/为容器文件目录</p></blockquote> <h2 id="把容器里的文件复制到宿主机"><a href="#把容器里的文件复制到宿主机" class="header-anchor">#</a> 把容器里的文件复制到宿主机</h2> <p><code>docker cp 73829d7b6139:/logs/test.txt /home</code></p> <blockquote><p>把容器73829d7b6139里面logs目录下的test.txt 拷贝到宿主机的/home目录下</p></blockquote> <h2 id="保存镜像"><a href="#保存镜像" class="header-anchor">#</a> 保存镜像</h2> <p><code>docker save visi-admin &gt;beifen.tar</code></p> <blockquote><p>visi-admin为镜像名字<br>
beifen.tar为保存后生成的镜像名</p></blockquote> <h2 id="导入镜像"><a href="#导入镜像" class="header-anchor">#</a> 导入镜像</h2> <p><code>docker load &lt;beifen.tar</code></p> <h2 id="查看最近100条日志"><a href="#查看最近100条日志" class="header-anchor">#</a> 查看最近100条日志</h2> <p><code>docker logs -f -t --tail=100 284676e7842f</code></p> <h2 id="查看正在运行的容器"><a href="#查看正在运行的容器" class="header-anchor">#</a> 查看正在运行的容器</h2> <p><code>sudo docker ps</code></p> <h2 id="进入某个容器"><a href="#进入某个容器" class="header-anchor">#</a> 进入某个容器</h2> <p><code>docker exec -it id bash</code></p> <h2 id="重命名容器"><a href="#重命名容器" class="header-anchor">#</a> 重命名容器</h2> <p><code>sudo docker rename oldname newname</code></p> <h2 id="提交容器"><a href="#提交容器" class="header-anchor">#</a> 提交容器</h2> <p><code>docker commit container_id image</code></p> <h2 id="启动容器时加入端口映射"><a href="#启动容器时加入端口映射" class="header-anchor">#</a> 启动容器时加入端口映射</h2> <p><code>sudo docker run -itd -p 53306:3306 -p522:22 centosport /bin/bash</code></p> <blockquote><p>-p加端口映射，多个端口映射时写多个-p<br> <code>报错Failed to get D-Bus connection: Operation not permitted</code></p></blockquote> <p><code>sudo docker run --privileged -itd -p 63306:3306 -p622:22 centosmysql /usr/sbin/init</code></p> <blockquote><p>若不加--privileged和/usr/sbin/init报错内容：Failed to get D-Bus connection: Operation not permitted。报这个错的原因是dbus-daemon没能启动。systemctl并不是不能使用。将CMD或者entrypoint设置为/usr/sbin/init即可。docker容器会自动将dbus等服务启动起来</p></blockquote> <h2 id="修改镜像名称"><a href="#修改镜像名称" class="header-anchor">#</a> 修改镜像名称</h2> <p><code>docker tag 73829d7b6139 mysql:5.6.44</code></p> <blockquote><p>把镜像id为73829d7b6139的命名为mysql:5.6.44
docker tag IMAGEID(镜像id) REPOSITORY:TAG（仓库：标签）</p></blockquote> <h2 id="打包镜像"><a href="#打包镜像" class="header-anchor">#</a> 打包镜像</h2> <p><code>docker build -t server .</code></p> <blockquote><p>在当前目录编写DockerFile文件，根据 <strong>DockerFile</strong> 内容打包到镜像<br>
.把当前目录下的所有文件
server 镜像名字</p></blockquote> <h2 id="监控命令"><a href="#监控命令" class="header-anchor">#</a> 监控命令</h2> <p><code>docker stats</code></p> <h2 id="查看进程信息"><a href="#查看进程信息" class="header-anchor">#</a> 查看进程信息</h2> <p><code>docker top</code></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/bi-ji/10go/ming-ling.html" class="prev">
        打包二进制文件
      </a></span> <span class="next"><a href="/bi-ji/docker/huan-jing-xiang-di-zhi.html">
        docker更换镜像仓库
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.624cd73c.js" defer></script><script src="/assets/js/2.91d313f1.js" defer></script><script src="/assets/js/11.2406fe55.js" defer></script>
  </body>
</html>
